(()=>{var e={6396:e=>{e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},9043:(e,t)=>{"use strict";t.A=window.MTBlockEditor.Block},6561:(e,t)=>{"use strict";t.Es=t.R4=t.c7=t.lG=t._M=t._n=t.vB=t.Lz=void 0;var a=window.MTBlockEditor.Component,n=(a.BlockIframePreview,a.BlockToolbar),i=a.BlockToolbarButton,l=(a.BlockConfigPanel,a.BlockSetup,a.BlockSetupCommon),o=a.BlockLabel,s=(a.EditorMode,a.Dialog),r=a.DialogHeader,c=a.DialogBody,d=a.DialogFooter;t.Lz=n,t.vB=i,t._n=l,t._M=o,t.lG=s,t.c7=r,t.R4=c,t.Es=d},6821:(e,t)=>{"use strict";t.mi=void 0;var a=window.MTBlockEditor.Context,n=(a.EditorContext,a.useEditorContext);a.BlocksContext,a.useBlocksContext;t.mi=n},6411:(e,t)=>{"use strict";t.o=void 0;var a=window.MTBlockEditor.Hook.useCommands;t.o=a},1641:(e,t)=>{"use strict";t.li=t.J0=t.Ay=void 0;var a=window.MTBlockEditor.React;t.Ay=a;var n=a.useState,i=(a.useEffect,a.useRef);t.J0=n,t.li=i},6611:(e,t)=>{"use strict";t.D=void 0;var a=window.MTBlockEditor.decorator.blockProperty;t.D=a},8728:(e,t)=>{"use strict";var a=window.MTBlockEditor.i18n;t.A=a},1053:(e,t)=>{"use strict";t.nf=t.hc=void 0;var a=window.MTBlockEditor.icon,n=a.edit,i=a.link;t.hc=n,t.nf=i},9364:(e,t)=>{"use strict";t.HA=void 0;var a=window.MTBlockEditor.util,n=a.nl2br;a.sanitize,a.isIos,a.isTouchDevice,a.focusIfIos;t.HA=n}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(6396),t=a.n(e);const n=jQuery;var i=a.n(n),l=a(9364),o=a(1641),s=a(6611),r=a(6561),c=a(9043),d=a(6411),m=a(6821),u=a(1053),g=a(8728);async function y(e){return new Promise((t=>{setTimeout((function a(){const n=e();n?Promise.resolve(n).then(t):setTimeout(a,100)}))}))}function h(e,t){const a={};return Object.keys(t).forEach((t=>{a[t]=e[t]})),a}const b={id:Symbol?Symbol("update block"):"update block",merge:(e,t)=>Object.keys(e.data.last).every((a=>e.data.last[a]===t.data.last[a]))?e:null,undo(e,{setFocusedIds:t}){const a=e.block,n=e.data;n.cur=n.cur||h(a,n.last),Object.assign(a,n.last),t([a.id],{forceUpdate:!0})},redo(e,{setFocusedIds:t}){const a=e.block,n=e.data;Object.assign(a,n.cur),t([a.id],{forceUpdate:!0})}};function p(e,t,a){e.editManager.add({block:t,data:{last:h(t,a)},handlers:b})}async function w({block:e,blogId:t,dummyFieldId:a}){const n=document.querySelector("#mt-dialog-iframe");await y((()=>n.contentWindow?.uploadFiles&&"loading"!==n.contentWindow?.document.readyState&&n.contentWindow?.jQuery&&new Promise((e=>n.contentWindow?.jQuery(e)))));const i=n.contentWindow;if(e.files&&e.files.length>=1){const t=i.document.querySelector("#upload");i.uploadFiles(e.files),t.style.setProperty("display","none","important"),e.files=[]}else if(e.assetId){const n=i.document;n.querySelector('[data-panel-id="#list-asset-panel"]').click();const l=n.querySelector("#search");await y((()=>!l.disabled));const o=n.querySelector("#asset-table tbody");let s=n.querySelector(`#asset-${e.assetId}`);if(!s){i.jQuery(".indicator, #listing-table-overlay").show(),i.jQuery("#asset-table tbody, #actions-bar .page-item").hide();const l=n.createElement("template"),o={__mode:"dialog_list_asset",_type:"asset",edit_field:a,blog_id:t,dialog_view:"1",dialog:"1",json:"1",can_multi:"0",filter:"id",filter_val:e.assetId},r=await fetch(window.CMSScriptURI+"?"+new URLSearchParams(o),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>e.json())).then((e=>e.html.replace(/^\s*<tbody>|<\/tbody>\s*$/g,""))).catch((()=>""));r&&(l.innerHTML=r,s=l.content),i.jQuery(".indicator, #listing-table-overlay").hide(),i.jQuery("#asset-table tbody, #actions-bar .page-item").show()}s&&(o.prepend(s),n.querySelector(`#asset-${e.assetId} input[name="id"]`).click())}}async function M(){const e=document.querySelector("#mt-dialog-iframe").contentWindow;return new Promise((t=>{e.document.querySelector(".modal-footer button.primary")?.addEventListener("click",(()=>{y((()=>e.document.querySelector("#asset-detail-panel-form"))).then(t)}))}))}const k=(0,s.D)((({focus:e,block:t})=>{const{editor:a}=(0,m.mi)(),[,n]=(0,o.J0)(Object.assign({},t)),[s,c]=(0,o.J0)(!1),[h,b]=(0,o.J0)(!1),k=(0,o.li)(null),A=window.trans("Please select an image");if((0,d.o)({block:t,commands:[{command:"core-insertLink",callback:()=>{b(!0)}}]},[]),!e&&!t.url&&"setup"===a.opts.mode)return o.Ay.createElement("p",null,A);async function v(){c(!0);const e={},l=document.querySelector("[name=blog_id]").value,o=`mt-block-editor-${t.id}-${(new Date).getTime()}`,s=i()("<div/>",{id:o});s.appendTo("body").data("mt-editor",{currentEditor:{insertContent(i){const l=document.createElement("template");l.innerHTML=i;const o=l.content.querySelector("img");Object.assign(e,{assetUrl:o.dataset.url,url:o.src,imageHeight:e.imageWidth?Math.round(parseInt(e.imageWidth)/o.width*o.height)+"":"",alignment:o.className?.replace(/^mt-image-/,""),hasCaption:""!==(e.caption||"")}),!e.linkUrl&&e.linkToOriginal&&(e.linkUrl=e.assetUrl),p(a,t,e),Object.assign(t,e),n(Object.assign({},t)),c(!1),s.remove()}}}),i().fn.mtModal.open(window.ScriptURI+"?"+new URLSearchParams({__mode:"dialog_asset_modal",_type:"asset",edit_field:o,blog_id:l,dialog_view:"1",filter:"class",filter_val:"image"}),{large:!0}),await w({block:t,blogId:l,dummyFieldId:o}),M().then((async a=>{const n=await y((()=>a.querySelector("[data-asset-id]")));e.assetId=n.dataset.assetId;const i=a.ownerDocument,l=i.createElement("style");i.head.appendChild(l),l.sheet?.insertRule('\n[id^="display_asset_prefs-"],\n[id^="link_to_popup-"] .custom-radio,\n.icon-align-left,\n.icon-align-right {\n  display: none !important;\n}\n      ');const o=i.querySelector("[id^=include_prefs-]"),s=i.createElement("template");s.innerHTML=`\n<div class="row">\n<div class="col-md-6">\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Alternative Text")}</label>\n  <input type="text" id="alternativeText" class="form-control">\n</div>\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Caption")}</label>\n  <textarea id="caption" class="form-control" rows="2"></textarea>\n</div>\n\n<div class="form-group">\n  <label class="form-control-label">${window.trans("Width")}</label>\n  <input type="number" id="imageWidth" class="form-control">\n</div>\n\n</div>\n</div>\n`,o.parentElement?.insertBefore(s.content,o),["alternativeText","caption","imageWidth"].forEach((a=>{const n=i.querySelector(`#${a}`);e[a]=n.value=t[a],n.addEventListener("input",(()=>{e[a]=n.value}))}));const r=i.querySelector('input[id^="create_thumbnail-"]');r.checked=t.useThumbnail,r.addEventListener("change",(()=>{t.useThumbnail=r.checked}));const c=i.querySelector('input[id^="thumb_width-"]');c.parentElement?.classList.add("d-none");const d=i.querySelector("#imageWidth");d.value||(d.value=c.value),d.addEventListener("input",(()=>{c.value=d.value})),d.dispatchEvent(new Event("input"));const m=i.querySelector("input[id^=link_to_popup-]");m.name="",e.linkToOriginal=m.checked=t.linkToOriginal,m.addEventListener("change",(()=>{e.linkToOriginal=m.checked}))}))}t.showModal&&(t.showModal=!1,v());const E=t.url;return o.Ay.createElement("div",{"data-mt-block-editor-keep-focus":s?"1":"0"},o.Ay.createElement(r._n,{block:t}),o.Ay.createElement(r._M,{block:t},E?t.hasCaption?o.Ay.createElement("figure",{style:"none"===t.alignment?{display:"inline-block"}:{}},o.Ay.createElement("img",{src:E,alt:t.alternativeText,width:t.imageWidth,height:t.imageHeight,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===t.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{})}),o.Ay.createElement("figcaption",null,e?o.Ay.createElement("textarea",{className:"mt-be-input","data-property-name":"caption","data-min-rows":"1",style:{width:"100%"}}):(0,l.HA)(t.caption))):o.Ay.createElement("p",null,o.Ay.createElement("img",{src:E,alt:t.alternativeText,width:t.imageWidth,height:t.imageHeight,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===t.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{display:"block"})})):o.Ay.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:v},A)),e&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(r.Lz,null,o.Ay.createElement(r.vB,{icon:u.hc,label:window.trans("Edit"),onClick:v}),o.Ay.createElement(r.vB,{icon:u.nf,label:window.trans("Insert Link"),onClick:()=>b(!0)})),o.Ay.createElement(r.lG,{open:h,onClose:()=>b(!1)},o.Ay.createElement(r.c7,null,o.Ay.createElement("h4",{className:"mt-be-dialog-title"},g.A.t("Insert Link"))),o.Ay.createElement("form",{ref:k},o.Ay.createElement(r.R4,null,o.Ay.createElement("label",{className:"mt-be-label-name"},o.Ay.createElement("div",{className:"mt-be-label-block"},g.A.t("Link URL")),o.Ay.createElement("input",{type:"url",className:"mt-be-input",name:"linkUrl",defaultValue:t.linkUrl,"data-mt-block-editor-focus-default":!0})),o.Ay.createElement("label",{className:"mt-be-label-name"},o.Ay.createElement("div",{className:"mt-be-label-block"},g.A.t("Title")),o.Ay.createElement("input",{className:"mt-be-input",name:"linkTitle",defaultValue:t.linkTitle})),o.Ay.createElement("label",{className:"mt-be-label-name"},o.Ay.createElement("div",{className:"mt-be-label-block"},g.A.t("Target Attribute")),o.Ay.createElement("select",{name:"linkTarget",className:"mt-be-input",defaultValue:t.linkTarget},o.Ay.createElement("option",{value:"_self"},g.A.t("None")),o.Ay.createElement("option",{value:"_blank"},g.A.t("New window"))))),o.Ay.createElement(r.Es,null,o.Ay.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:()=>{b(!1)}},g.A.t("Close")),o.Ay.createElement("button",{type:"button",className:"mt-be-btn-primary",onClick:()=>{const e=k.current;e&&(["linkUrl","linkTitle","linkTarget"].forEach((a=>{t[a]=e[a].value})),b(!1))}},g.A.t("Save")))))))})),A=({block:e})=>{const t="asset asset-image"+("center"===e.alignment?" mt-image-center":"");let a=e.caption?o.Ay.createElement("img",{src:e.url,alt:e.alternativeText,width:e.imageWidth,height:e.imageHeight,className:t,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===e.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{})}):o.Ay.createElement("img",{src:e.url,alt:e.alternativeText,width:e.imageWidth,height:e.imageHeight,className:t,style:Object.assign({maxWidth:"100%",height:"auto"},"center"===e.alignment?{display:"block",marginLeft:"auto",marginRight:"auto"}:{display:"block"})});return e.linkUrl&&(a=o.Ay.createElement("a",{href:e.linkUrl,target:e.linkTarget,title:e.linkTitle||void 0},a)),e.caption?o.Ay.createElement("figure",{className:"mt-figure"+("center"===e.alignment?" mt-figure-center":""),style:"none"===e.alignment?{display:"inline-block"}:{}},a,o.Ay.createElement("figcaption",null,(0,l.HA)(e.caption))):o.Ay.createElement("p",null,a)};class v extends c.A{static get label(){return window.trans("MTImage")}constructor(e){super(),t()(this,"assetId",void 0),t()(this,"assetUrl",void 0),t()(this,"url",void 0),t()(this,"imageWidth",void 0),t()(this,"imageHeight",void 0),t()(this,"alternativeText",void 0),t()(this,"caption",void 0),t()(this,"alignment",void 0),t()(this,"showModal",void 0),t()(this,"hasCaption",void 0),t()(this,"useThumbnail",void 0),t()(this,"files",void 0),t()(this,"linkToOriginal",void 0),t()(this,"linkUrl",void 0),t()(this,"linkTarget","_self"),t()(this,"linkTitle",void 0),this.assetId="",this.assetUrl="",this.url="",this.imageWidth="",this.imageHeight="",this.alternativeText="",this.caption="",this.linkToOriginal=!1,this.alignment="",this.useThumbnail=!1,this.showModal=!1,this.linkUrl="",this.linkTitle="",e&&Object.assign(this,e),this.hasCaption=""!==this.caption}metadata(){return this.metadataByOwnKeys({keys:["assetId","alignment","useThumbnail"]})}editor({focus:e}){return o.Ay.createElement(k,{key:this.id,focus:e,block:this})}html(){return o.Ay.createElement(A,{block:this})}static async new({editor:e}){const t=e.opts.block["mt-image"]||{};return new this({showModal:"boolean"!=typeof t.showModalOnNew||t.showModalOnNew})}static async newFromHtml({html:e,meta:t}){const a=(new DOMParser).parseFromString(e,"text/html"),n=a.querySelector("IMG"),i=a.querySelector("FIGCAPTION"),l=a.querySelector("A"),o={url:n?.getAttribute("src")||"",imageWidth:(n?.width||"").toString(),imageHeight:(n?.height||"").toString(),alternativeText:n?.alt||"",caption:i?.innerHTML.replace(/<br[^>]*>/g,"\n")||"",assetUrl:l?.getAttribute("href")||"",linkToOriginal:!(!l||l.getAttribute("target"))};return l&&(l.getAttribute("target")?(o.linkUrl=l.getAttribute("href")||"",o.linkTitle=l.getAttribute("title")||"",o.linkTarget=l.target):o.linkUrl=l.href),new v(Object.assign(o,t))}static canNewFromFile({file:e}){return/^image\//.test(e.type)}static async newFromFile({file:e}){return new v({files:[e],showModal:!0})}}t()(v,"typeId","mt-image"),t()(v,"selectable",!0),t()(v,"icon","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJz48c3R5bGU+LnN0MHtmaWxsOiM2NjZ9PC9zdHlsZT48cGF0aCBjbGFzcz0nc3QwJyBkPSdNNDY0IDQ0OEg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWMTEyYzAtMjYuNSAyMS41LTQ4IDQ4LTQ4aDQxNmMyNi41IDAgNDggMjEuNSA0OCA0OHYyODhjMCAyNi41LTIxLjUgNDgtNDggNDh6TTExMiAxMjBjLTMwLjkgMC01NiAyNS4xLTU2IDU2czI1LjEgNTYgNTYgNTYgNTYtMjUuMSA1Ni01Ni0yNS4xLTU2LTU2LTU2ek02NCAzODRoMzg0VjI3MmwtODcuNS04Ny41Yy00LjctNC43LTEyLjMtNC43LTE3IDBMMjA4IDMyMGwtNTUuNS01NS41Yy00LjctNC43LTEyLjMtNC43LTE3IDBMNjQgMzM2djQ4eicvPjwvc3ZnPgo=");const E=v,T=(0,s.D)((({focus:e,block:t})=>{const{editor:a}=(0,m.mi)(),[,n]=(0,o.J0)(Object.assign({},t)),[l,s]=(0,o.J0)(!1),c=window.trans("Please select an file");async function d(){s(!0);const e={},l=document.querySelector("[name=blog_id]").value,o=`mt-block-editor-${t.id}-${(new Date).getTime()}`;i()("<div/>",{id:o}).appendTo("body").data("mt-editor",{currentEditor:{insertContent(i){const l=document.createElement("template");l.innerHTML=i;const o=l.content.querySelector("a");if(o)Object.assign(e,{assetUrl:o.getAttribute("href"),text:t.text||o.textContent});else{const a=l.content.querySelector("img");Object.assign(e,{assetUrl:a.dataset.url||a.src,text:t.text||a.alt})}p(a,t,e),Object.assign(t,e),n(Object.assign({},t)),s(!1)}}}),i().fn.mtModal.open(window.ScriptURI+"?"+new URLSearchParams({__mode:"dialog_asset_modal",_type:"asset",edit_field:o,blog_id:l,dialog_view:"1"}),{large:!0}),await w({block:t,blogId:l,dummyFieldId:o}),M().then((async t=>{const a=await y((()=>t.querySelector("[data-asset-id]")));e.assetId=a.dataset.assetId;const n=t.ownerDocument,i=n.createElement("style");n.head.appendChild(i),i.sheet?.insertRule("\nbody { display: none }\n      ");const l=t.querySelector("button.primary");await y((()=>{const e=n.defaultView?.jQuery._data(l,"events");return!(!e||!e.click)})),l.click()}))}return t.showModal&&(t.showModal=!1,d()),o.Ay.createElement("div",{"data-mt-block-editor-keep-focus":l?"1":"0"},o.Ay.createElement(r._n,{block:t}),o.Ay.createElement(r._M,{block:t},t.assetUrl?e?o.Ay.createElement("div",null,o.Ay.createElement("label",{className:"mt-be-label-name"},o.Ay.createElement("div",null,window.trans("Link URL")),o.Ay.createElement("a",{className:"mt-be-input--static",href:t.assetUrl,target:"_blank",rel:"noreferrer"},t.assetUrl)),o.Ay.createElement("label",{className:"mt-be-label-name"},o.Ay.createElement("div",null,window.trans("Text to display")),o.Ay.createElement("input",{"data-property-name":"text",style:{width:"100%"}}))):o.Ay.createElement("a",{href:"javascript: void(0)"},t.text):o.Ay.createElement("button",{type:"button",className:"mt-be-btn-default",onClick:d},c)),e&&o.Ay.createElement(r.Lz,null,o.Ay.createElement(r.vB,{icon:u.hc,label:window.trans("Edit"),onClick:d})))})),f=({block:e})=>o.Ay.createElement("div",null,o.Ay.createElement("a",{href:e.assetUrl},e.text));class N extends c.A{static get label(){return window.trans("MTFile")}constructor(e){super(),t()(this,"assetId",void 0),t()(this,"assetUrl",void 0),t()(this,"text",void 0),t()(this,"showModal",void 0),t()(this,"files",void 0),this.assetId="",this.assetUrl="",this.text="",this.showModal=!1,e&&Object.assign(this,e)}metadata(){return this.metadataByOwnKeys({keys:["assetId"]})}editor({focus:e}){return o.Ay.createElement(T,{key:this.id,focus:e,block:this})}html(){return o.Ay.createElement(f,{block:this})}static async new({editor:e}){const t=e.opts.block["mt-file"]||{};return new this({showModal:"boolean"!=typeof t.showModalOnNew||t.showModalOnNew})}static async newFromHtml({html:e,meta:t}){const a=(new DOMParser).parseFromString(e,"text/html").querySelector("A");return new N(Object.assign({assetUrl:a?.getAttribute("href")||"",text:a?.textContent||""},t))}static canNewFromFile({file:e}){return!/^image\//.test(e.type||"")}static async newFromFile({file:e}){return new N({files:[e],showModal:!0})}}t()(N,"typeId","mt-file"),t()(N,"selectable",!0),t()(N,"icon","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzODQgNTEyJz48c3R5bGU+LnN0MHtmaWxsOiM2NjZ9PC9zdHlsZT48cGF0aCBjbGFzcz0nc3QwJyBkPSdNMjg4IDI0OHYyOGMwIDYuNi01LjQgMTItMTIgMTJIMTA4Yy02LjYgMC0xMi01LjQtMTItMTJ2LTI4YzAtNi42IDUuNC0xMiAxMi0xMmgxNjhjNi42IDAgMTIgNS40IDEyIDEyem0tMTIgNzJIMTA4Yy02LjYgMC0xMiA1LjQtMTIgMTJ2MjhjMCA2LjYgNS40IDEyIDEyIDEyaDE2OGM2LjYgMCAxMi01LjQgMTItMTJ2LTI4YzAtNi42LTUuNC0xMi0xMi0xMnptMTA4LTE4OC4xVjQ2NGMwIDI2LjUtMjEuNSA0OC00OCA0OEg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWNDhDMCAyMS41IDIxLjUgMCA0OCAwaDIwNC4xQzI2NC44IDAgMjc3IDUuMSAyODYgMTQuMUwzNjkuOSA5OGM5IDguOSAxNC4xIDIxLjIgMTQuMSAzMy45em0tMTI4LTgwVjEyOGg3Ni4xTDI1NiA1MS45ek0zMzYgNDY0VjE3NkgyMzJjLTEzLjMgMC0yNC0xMC43LTI0LTI0VjQ4SDQ4djQxNmgyODh6Jy8+PC9zdmc+Cg==");const I=N;window.MTBlockEditor.registerBlockType(E),window.MTBlockEditor.registerBlockType(I)})()})();